<!DOCTYPE html>
<html>
  <head>

    <meta charset="utf-8" />
    <title>camera move</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <script src="https://unpkg.com/maplibre-gl@2.1.1/dist/maplibre-gl.js"></script>
    <link href="https://unpkg.com/maplibre-gl@2.1.1/dist/maplibre-gl.css" rel="stylesheet" />


    <script src="./firstPersonCamLib.js"></script><!--    -->

    
    <style>
      body { margin: 0; padding: 0; }
      #map { position: absolute; top: 0; bottom: 0; width: 100%;background: linear-gradient(0deg, #ffffff 0%, #FF853F 55%, #ffffff 65%, #7296c4ff 100%); }
    </style>

  </head>
  <body>
      
    <div id="map"></div>
   
    <script>

    var gallery = {

    "type": "FeatureCollection",
    "generator": "JOSM",
    "features": [
        {
            "type": "Feature",
            "properties": {
                "direction": "45",
                "tourism": "viewpoint",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_41.jpg",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76128106620,
                    39.99996760752
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "indoor": "wall"
            },
            "geometry": {
                "type": "LineString",
                "coordinates": [
                    [
                        -4.76132246620,
                        39.99995235308
                    ],
                    [
                        -4.76132166620,
                        39.99995174694
                    ],
                    [
                        -4.76130076620,
                        39.99996750649
                    ],
                    [
                        -4.76128096620,
                        39.99995215103
                    ],
                    [
                        -4.76128016620,
                        39.99995275717
                    ],
                    [
                        -4.76129996620,
                        39.99996811263
                    ],
                    [
                        -4.76127986620,
                        39.99998326605
                    ],
                    [
                        -4.76128066620,
                        39.99998387219
                    ],
                    [
                        -4.76130076620,
                        39.99996871877
                    ],
                    [
                        -4.76132056620,
                        39.99998407423
                    ],
                    [
                        -4.76132136620,
                        39.99998346810
                    ],
                    [
                        -4.76130156620,
                        39.99996811263
                    ],
                    [
                        -4.76132246620,
                        39.99995235308
                    ]
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_47.jpg",
                "direction": "135",
                "tourism": "viewpoint",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76130056620,
                    39.99998326605
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "wall": "yes",
                "indoor": "area",
                "color": "green"
            },
            "geometry": {
                "type": "Polygon",
                "coordinates": [[
                    [
                        -4.76123126620,
                        40.00006539759
                    ],
                    [
                        -4.76123206620,
                        40.00006479145
                    ],
                    [
                        -4.76121216620,
                        40.00004943598
                    ],
                    [
                        -4.76123306620,
                        40.00003367643
                    ],
                    [
                        -4.76123226620,
                        40.00003307029
                    ],
                    [
                        -4.76121146620,
                        40.00004882985
                    ],
                    [
                        -4.76119156620,
                        40.00003347438
                    ],
                    [
                        -4.76119076620,
                        40.00003408052
                    ],
                    [
                        -4.76121066620,
                        40.00004943598
                    ],
                    [
                        -4.76119056620,
                        40.00006458940
                    ],
                    [
                        -4.76119136620,
                        40.00006519554
                    ],
                    [
                        -4.76121146620,
                        40.00005004212
                    ],
                    [
                        -4.76123126620,
                        40.00006539759
                    ]
                ]]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "135",
                "tourism": "viewpoint",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_14.jpg",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76117206620,
                    40.00015955083
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "wall": "yes",
                "color": "white",
                "indoor": "area",
                "building": "yes"
            },
            "geometry": {
                "type": "Polygon",
                "coordinates": [
                    [
                        [
                            -4.76134616620,
                            39.99992144010
                        ],
                        [
                            -4.76134636620,
                            39.99992517794
                        ],
                        [
                            -4.76116186620,
                            39.99992447079
                        ],
                        [
                            -4.76116016620,
                            40.00016591527
                        ],
                        [
                            -4.76134426620,
                            40.00016662242
                        ],
                        [
                            -4.76134526620,
                            40.00004781962
                        ],
                        [
                            -4.76135026620,
                            40.00004792064
                        ],
                        [
                            -4.76134996620,
                            40.00008499600
                        ],
                        [
                            -4.76143956620,
                            40.00008529908
                        ],
                        [
                            -4.76144096620,
                            39.99988476883
                        ],
                        [
                            -4.76135156620,
                            39.99988436474
                        ],
                        [
                            -4.76135036620,
                            40.00000559209
                        ],
                        [
                            -4.76134566620,
                            40.00000528902
                        ],
                        [
                            -4.76134616620,
                            39.99988082894
                        ],
                        [
                            -4.76144636620,
                            39.99988123304
                        ],
                        [
                            -4.76144496620,
                            40.00008893589
                        ],
                        [
                            -4.76135026620,
                            40.00008853180
                        ],
                        [
                            -4.76134966620,
                            40.00017025925
                        ],
                        [
                            -4.76115476620,
                            40.00016945106
                        ],
                        [
                            -4.76115646620,
                            39.99992083397
                        ],
                        [
                            -4.76134616620,
                            39.99992144010
                        ]
                    ]
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "tourism": "viewpoint",
                "direction": "90",
                "orientation": "0",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_24.jpg",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76116966620,
                    40.00000559209
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "tourism": "viewpoint",
                "orientation": "0",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_08.jpg",
                "direction": "-135",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76133526620,
                    40.00015894469
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "indoor": "wall"
            },
            "geometry": {
                "type": "LineString",
                "coordinates": [
                    [
                        -4.76123306620,
                        40.00003367643
                    ],
                    [
                        -4.76123226620,
                        40.00003307029
                    ],
                    [
                        -4.76121146620,
                        40.00004882985
                    ],
                    [
                        -4.76119156620,
                        40.00003347438
                    ],
                    [
                        -4.76119076620,
                        40.00003408052
                    ],
                    [
                        -4.76121066620,
                        40.00004943598
                    ],
                    [
                        -4.76119056620,
                        40.00006458940
                    ],
                    [
                        -4.76119136620,
                        40.00006519554
                    ],
                    [
                        -4.76121146620,
                        40.00005004212
                    ],
                    [
                        -4.76123126620,
                        40.00006539759
                    ],
                    [
                        -4.76123206620,
                        40.00006479145
                    ],
                    [
                        -4.76121216620,
                        40.00004943598
                    ],
                    [
                        -4.76123306620,
                        40.00003367643
                    ]
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_16.jpg",
                "tourism": "viewpoint",
                "direction": "90",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76116846620,
                    40.00009257272
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "135",
                "tourism": "viewpoint",
                "orientation": "0",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_21.jpg",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76121126620,
                    40.00006448838
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "tourism": "viewpoint",
                "orientation": "0",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_06.jpg",
                "direction": "-135",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76125526620,
                    40.00016086413
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "wall": "yes",
                "indoor": "area",
                "color": "red"
            },
            "geometry": {
                "type": "Polygon",
                "coordinates": [[
                    [
                        -4.76132136620,
                        40.00011560592
                    ],
                    [
                        -4.76132056620,
                        40.00011499978
                    ],
                    [
                        -4.76129966620,
                        40.00013075934
                    ],
                    [
                        -4.76127986620,
                        40.00011550489
                    ],
                    [
                        -4.76127906620,
                        40.00011611103
                    ],
                    [
                        -4.76129886620,
                        40.00013136547
                    ],
                    [
                        -4.76127886620,
                        40.00014661991
                    ],
                    [
                        -4.76127966620,
                        40.00014722605
                    ],
                    [
                        -4.76129966620,
                        40.00013197160
                    ],
                    [
                        -4.76131956620,
                        40.00014732707
                    ],
                    [
                        -4.76132026620,
                        40.00014672093
                    ],
                    [
                        -4.76130046620,
                        40.00013136547
                    ],
                    [
                        -4.76132136620,
                        40.00011560592
                    ]
                ]]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "-45",
                "tourism": "viewpoint",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_43.jpg",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76130096620,
                    39.99995306024
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "wall": "yes",
                "color": "blue",
                "indoor": "area"
            },
            "geometry": {
                "type": "Polygon",
                "coordinates": [[
                    [
                        -4.76123246620,
                        40.00011550489
                    ],
                    [
                        -4.76123166620,
                        40.00011489875
                    ],
                    [
                        -4.76121076620,
                        40.00013065831
                    ],
                    [
                        -4.76119096620,
                        40.00011530284
                    ],
                    [
                        -4.76119016620,
                        40.00011590898
                    ],
                    [
                        -4.76120996620,
                        40.00013126445
                    ],
                    [
                        -4.76118996620,
                        40.00014641787
                    ],
                    [
                        -4.76119076620,
                        40.00014702400
                    ],
                    [
                        -4.76121076620,
                        40.00013187058
                    ],
                    [
                        -4.76123066620,
                        40.00014722605
                    ],
                    [
                        -4.76123146620,
                        40.00014661991
                    ],
                    [
                        -4.76121156620,
                        40.00013126445
                    ],
                    [
                        -4.76123246620,
                        40.00011550489
                    ]
                ]]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "thumbnail": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_02_thumbnail.jpg",
                "direction": "-45",
                "tourism": "viewpoint",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_02.jpg",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76133536620,
                    40.00010388727
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "45",
                "tourism": "viewpoint",
                "orientation": "0",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_33.jpg",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76119226620,
                    39.99996770854
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "color": "blue",
                "indoor": "wall"
            },
            "geometry": {
                "type": "LineString",
                "coordinates": [
                    [
                        -4.76131956620,
                        40.00014732707
                    ],
                    [
                        -4.76132026620,
                        40.00014672093
                    ],
                    [
                        -4.76130046620,
                        40.00013136547
                    ],
                    [
                        -4.76132136620,
                        40.00011560592
                    ],
                    [
                        -4.76132056620,
                        40.00011499978
                    ],
                    [
                        -4.76129966620,
                        40.00013075934
                    ],
                    [
                        -4.76127986620,
                        40.00011550489
                    ],
                    [
                        -4.76127906620,
                        40.00011611103
                    ],
                    [
                        -4.76129886620,
                        40.00013136547
                    ],
                    [
                        -4.76127886620,
                        40.00014661991
                    ],
                    [
                        -4.76127966620,
                        40.00014722605
                    ],
                    [
                        -4.76129966620,
                        40.00013197160
                    ],
                    [
                        -4.76131956620,
                        40.00014732707
                    ]
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "-45",
                "tourism": "viewpoint",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_37.jpg",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76123176620,
                    39.99996801161
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "-45",
                "tourism": "viewpoint",
                "orientation": "0",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_09.jpg",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76131946620,
                    40.00013166854
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "color": "orange",
                "wall": "yes",
                "indoor": "area"
            },
            "geometry": {
                "type": "Polygon",
                "coordinates": [[
                    [
                        -4.76132056620,
                        39.99998407423
                    ],
                    [
                        -4.76130076620,
                        39.99996871877
                    ],
                    [
                        -4.76128066620,
                        39.99998387219
                    ],
                    [
                        -4.76127986620,
                        39.99998326605
                    ],
                    [
                        -4.76129996620,
                        39.99996811263
                    ],
                    [
                        -4.76128016620,
                        39.99995275717
                    ],
                    [
                        -4.76128096620,
                        39.99995215103
                    ],
                    [
                        -4.76130076620,
                        39.99996750649
                    ],
                    [
                        -4.76132166620,
                        39.99995174694
                    ],
                    [
                        -4.76132246620,
                        39.99995235308
                    ],
                    [
                        -4.76130156620,
                        39.99996811263
                    ],
                    [
                        -4.76132136620,
                        39.99998346810
                    ],
                    [
                        -4.76132056620,
                        39.99998407423
                    ]
                ]]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "-45",
                "tourism": "viewpoint",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_27.jpg",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76123116620,
                    40.00004963803
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "135",
                "tourism": "viewpoint",
                "orientation": "0",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_31.jpg",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76121176620,
                    39.99998286196
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "indoor": "wall",
                "color": "yellow"
            },
            "geometry": {
                "type": "LineString",
                "coordinates": [
                    [
                        -4.76123186620,
                        39.99998377117
                    ],
                    [
                        -4.76123266620,
                        39.99998316503
                    ],
                    [
                        -4.76121276620,
                        39.99996780957
                    ],
                    [
                        -4.76123366620,
                        39.99995205001
                    ],
                    [
                        -4.76123286620,
                        39.99995144387
                    ],
                    [
                        -4.76121196620,
                        39.99996720343
                    ],
                    [
                        -4.76119216620,
                        39.99995184797
                    ],
                    [
                        -4.76119136620,
                        39.99995245410
                    ],
                    [
                        -4.76121116620,
                        39.99996780957
                    ],
                    [
                        -4.76119116620,
                        39.99998296299
                    ],
                    [
                        -4.76119196620,
                        39.99998356913
                    ],
                    [
                        -4.76121196620,
                        39.99996841571
                    ],
                    [
                        -4.76123186620,
                        39.99998377117
                    ]
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "-45",
                "tourism": "viewpoint",
                "orientation": "0",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_45.jpg",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76132056620,
                    39.99996831468
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "45",
                "tourism": "viewpoint",
                "orientation": "0",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_35.jpg",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76121216620,
                    39.99995275717
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_10.jpg",
                "tourism": "viewpoint",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76125656620,
                    40.00009237067
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "-45",
                "tourism": "viewpoint",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_44.jpg",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76134156620,
                    39.99993750273
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "45",
                "tourism": "viewpoint",
                "orientation": "0",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_25.jpg",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76121156620,
                    40.00003438358
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_30.jpg",
                "tourism": "viewpoint",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76125926620,
                    40.00000821868
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "0",
                "tourism": "viewpoint",
                "orientation": "0",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_36.jpg",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76125526620,
                    39.99993507818
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "45",
                "tourism": "viewpoint",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_15.jpg",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76119106620,
                    40.00013106240
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "135",
                "tourism": "viewpoint",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_07.jpg",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76129946620,
                    40.00014651889
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "tourism": "viewpoint",
                "direction": "-90",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_01.jpg",
                "entrance": "yes",
                "orientation": "0",
                "thumbnail": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_01_thumbnail.jpg",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76133526620,
                    40.00002801915
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "height": "0.3",
                "orientation": "45",
                "image": "https://vegeta.openindoor.io/indoor/art_gallery/image/left_02_30x30.png",
                "artwork_type": "painting",
                "elevation": "1.55"
            },
            "geometry": {
                "type": "LineString",
                "coordinates": [
                    [
                        -4.76122106739,
                        40.00005584664
                    ],
                    [
                        -4.76122357294,
                        40.00005778001
                    ]
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "-45",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_11.jpg",
                "tourism": "viewpoint",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76123056620,
                    40.00013126445
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "indoor": "wall",
                "color": "red"
            },
            "geometry": {
                "type": "LineString",
                "coordinates": [
                    [
                        -4.76123066620,
                        40.00014722605
                    ],
                    [
                        -4.76123146620,
                        40.00014661991
                    ],
                    [
                        -4.76121156620,
                        40.00013126445
                    ],
                    [
                        -4.76123246620,
                        40.00011550489
                    ],
                    [
                        -4.76123166620,
                        40.00011489875
                    ],
                    [
                        -4.76121076620,
                        40.00013065831
                    ],
                    [
                        -4.76119096620,
                        40.00011530284
                    ],
                    [
                        -4.76119016620,
                        40.00011590898
                    ],
                    [
                        -4.76120996620,
                        40.00013126445
                    ],
                    [
                        -4.76118996620,
                        40.00014641787
                    ],
                    [
                        -4.76119076620,
                        40.00014702400
                    ],
                    [
                        -4.76121076620,
                        40.00013187058
                    ],
                    [
                        -4.76123066620,
                        40.00014722605
                    ]
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "135",
                "tourism": "viewpoint",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_13.jpg",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76121066620,
                    40.00014621582
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_05.jpg",
                "tourism": "viewpoint",
                "direction": "90",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76127996620,
                    40.00013136547
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "45",
                "tourism": "viewpoint",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_03.jpg",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76129986620,
                    40.00011641410
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "pattern": "parquet",
                "floor:material": "wood",
                "indoor": "area"
            },
            "geometry": {
                "type": "Polygon",
                "coordinates": [[
                    [
                        -4.76143956620,
                        40.00008529908
                    ],
                    [
                        -4.76144096620,
                        39.99988476883
                    ],
                    [
                        -4.76135156620,
                        39.99988436474
                    ],
                    [
                        -4.76135036620,
                        40.00000559209
                    ],
                    [
                        -4.76134566620,
                        40.00000528902
                    ],
                    [
                        -4.76134636620,
                        39.99992517794
                    ],
                    [
                        -4.76116186620,
                        39.99992447079
                    ],
                    [
                        -4.76116016620,
                        40.00016591527
                    ],
                    [
                        -4.76134426620,
                        40.00016662242
                    ],
                    [
                        -4.76134526620,
                        40.00004781962
                    ],
                    [
                        -4.76135026620,
                        40.00004792064
                    ],
                    [
                        -4.76134996620,
                        40.00008499600
                    ],
                    [
                        -4.76143956620,
                        40.00008529908
                    ]
                ]]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "45",
                "tourism": "viewpoint",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_17.jpg",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76121096620,
                    40.00011601001
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "wall": "yes",
                "color": "yellow",
                "indoor": "area"
            },
            "geometry": {
                "type": "Polygon",
                "coordinates": [[
                    [
                        -4.76123366620,
                        39.99995205001
                    ],
                    [
                        -4.76123286620,
                        39.99995144387
                    ],
                    [
                        -4.76121196620,
                        39.99996720343
                    ],
                    [
                        -4.76119216620,
                        39.99995184797
                    ],
                    [
                        -4.76119136620,
                        39.99995245410
                    ],
                    [
                        -4.76121116620,
                        39.99996780957
                    ],
                    [
                        -4.76119116620,
                        39.99998296299
                    ],
                    [
                        -4.76119196620,
                        39.99998356913
                    ],
                    [
                        -4.76121196620,
                        39.99996841571
                    ],
                    [
                        -4.76123186620,
                        39.99998377117
                    ],
                    [
                        -4.76123266620,
                        39.99998316503
                    ],
                    [
                        -4.76121276620,
                        39.99996780957
                    ],
                    [
                        -4.76123366620,
                        39.99995205001
                    ]
                ]]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_23.jpg",
                "direction": "45",
                "tourism": "viewpoint",
                "orientation": "0",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76119166620,
                    40.00004933496
                ]
            }
        },
        {
            "type": "Feature",
            "properties": {
                "direction": "45",
                "tourism": "viewpoint",
                "orientation": "0",
                "image": "https://vegeta.openindoor.io/indoor/img/art_gallery/Art_Museum_Gallery_Interior_34.jpg",
                "indoor": "yes"
            },
            "geometry": {
                "type": "Point",
                "coordinates": [
                    -4.76117156620,
                    39.99993295670
                ]
            }
        }
    ]
}










  var map = new maplibregl.Map({
      "maxPitch":85,
      
      container: 'map',
      style: {
        "id": "raster",
        "version": 8,
        "name": "Raster tiles",
        "center": [0, 0],
        "zoom": 0,
        "sources": {
          "raster-tiles": {
            "type": "raster",
            "tiles": [
              "https://tile.openstreetmap.org/{z}/{x}/{y}.png",
            ],
            "tileSize": 256,
            "maxzoom": 19
          }
        },
        "layers": [{
          "id": "background",
          "type": "background",
          "paint": {
            "background-color": "#e0dfdf"
          }
        }, {
          "id": "simple-tiles",
          "type": "raster",
          "source": "raster-tiles"
        }]
      },
      center: [-4.76117156620,39.99993295670],
      zoom: 17,
      pitch: 20,
      bearing: 0,
      antialias: true,
    });


    map.on('load', function() {

      map.on('click', 'gallery-step', (e) => {
        if (e.features != null && e.features.length > 0) {
            
            let coords = e.features[0].geometry.coordinates;

            camTP(coords);

        }
    });


    map.addSource('gallery', {
      'type': 'geojson',
      'data': gallery
    });


    map.loadImage("parquet.png",
      (error, image) => {
        map.addImage("parquet", image , {pixelRatio:3});
      }
    );

    map.loadImage('marker.png',
      function(error, image) {
        if (error) throw error;
        map.addImage('marker', image);
      }
    );


    map.addLayer({
      'id': 'gallery-ground',
      'type': 'fill',
      'source': 'gallery',
      'paint': {
        'fill-pattern': ["get", "pattern"],
      },
      'filter': [
        "all", ['==', '$type', 'Polygon'],
        ["has", "floor:material"]
      ]
    })
    
    map.addLayer({
      'id': 'gallery-step',
      'type': 'symbol',
      'source': 'gallery',
      'filter': ['==', '$type', 'Point'],
      'layout': {
        'icon-image': 'marker',
      },
    })
    map.addLayer({
      'id': 'gallery-panel',
      'type': 'fill-extrusion',
      'source': 'gallery',
      'filter': [
        "all", [
          'has', 'color'
        ],
        [
          'has', 'indoor'
        ],
        [
          '==', '$type', 'Polygon'
        ],
      ],
      'paint': {
        'fill-extrusion-color': ['get', 'color'],
        'fill-extrusion-height': 2.5
      },
    });

    map.addLayer({
      'id': 'gallery-paint',
      'type': 'fill-extrusion',
      'source': 'gallery',
      'paint': {
        'fill-extrusion-base': ["to-number", ["get", "elevation"]],
        'fill-extrusion-height': [
          "+", ["to-number", ["get", "elevation"]],
          ["to-number", ["get", "height"]]
        ],
        'fill-extrusion-color': "#000"
      },
      'filter': [
        "all", ['has', 'image'],
        ['has', 'artwork_type']
      ],

    })




    });



    </script>
  </body>
</html>
